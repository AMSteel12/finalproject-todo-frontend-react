(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(22),s=a.n(c),o=a(6),i=a(10),d=a(13),u=a(104),j=a(55);function l(e,t){switch(t.type){case"LOGIN":case"REGISTER":return{username:t.username,access_token:t.access_token};case"LOGOUT":return{username:void 0,access_token:void 0};default:return e}}function b(e,t){switch(t.type){case"CREATE_TODO":return[{id:t.id,title:t.title,description:t.description,author:t.author,completeStatus:!1,completedDate:void 0}].concat(Object(j.a)(e));case"TOGGLE_TODO":return e.map((function(e){return e.id===t.todoId&&(e.completeStatus=t.complete,e.completedDate=t.completedDate),e}));case"DELETE_TODO":return e.filter((function(e){return e.id!==t.todoId}));case"FETCH_TODOS":return t.todos;default:return e}}function O(e,t){return{user:l(e.user,t),posts:b(e.todos,t)}}var h=a(8),p=a(11),x=a(1);function f(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(""),s=Object(o.a)(c,2),i=s[0],u=s[1],j=Object(d.d)(),l=Object(r.useContext)(h.a),b=l.state,O=l.dispatch,f=b.user,m=Object(p.b)((function(e){var t=e.title,a=e.description,r=e.author;return{url:"/todo",method:"post",headers:{Authorization:"".concat(b.user.access_token)},data:{title:t,description:a,author:r}}})),g=Object(o.a)(m,2),v=g[0],C=g[1];return Object(r.useEffect)((function(){v&&v.data&&(O({type:"CREATE_TODO",title:v.data.title,description:v.data.description,id:v.data.id,author:f.username}),console.log(v.data),j.navigate("/todo/".concat(v.data.id)))}),[v]),Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault(),C({title:a,description:i,author:f.username})},children:[Object(x.jsxs)("div",{children:["Author: ",Object(x.jsx)("b",{children:f.username})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("label",{htmlFor:"create-title",children:"Title:"}),Object(x.jsx)("input",{type:"text",value:a,onChange:function(e){n(e.target.value)},name:"create-title",id:"create-title"})]}),Object(x.jsx)("textarea",{value:i,onChange:function(e){u(e.target.value)}}),Object(x.jsx)("input",{type:"submit",value:"Publish Todo"})]})}var m=a(2),g=a(109),v=a(103);function C(e){var t=e.title,a=e.description,n=e.author,c=e.completeStatus,s=e.completedDate,i=e.todoId,u=e.short,j=void 0!==u&&u,l=Object(r.useContext)(h.b).secondaryColor,b=Object(r.useContext)(h.a).dispatch,O=Object(p.b)((function(e){return{url:"/todos/".concat(e),method:"delete"}})),f=Object(o.a)(O,2),m=f[0],C=f[1],w=Object(p.b)((function(e,t){return{url:"/todos/".concat(e),method:"patch",data:{completeStatus:t,completedDate:Date.now()}}})),y=Object(o.a)(w,2),T=y[0],E=y[1];Object(r.useEffect)((function(){m&&m.data&&!1===m.isLoading&&b({type:"DELETE_TODO",todoId:i})}),[m]),Object(r.useEffect)((function(){T&&T.data&&!1===T.isLoading&&b({type:"TOGGLE_TODO",completeStatus:T.data.completeStatus,completedDate:T.data.completedDate,todoId:i})}),[T]);var k=a;return j&&a.length>30&&(k=a.substring(0,30)+"..."),Object(x.jsx)(g.a,{children:Object(x.jsxs)(g.a.Body,{children:[Object(x.jsx)(g.a.Title,{children:Object(x.jsx)(d.a,{style:{color:l},href:"/todo/".concat(i),children:t})}),Object(x.jsx)(g.a.Subtitle,{children:Object(x.jsxs)("i",{children:["Created by: ",Object(x.jsx)("b",{children:n})]})}),Object(x.jsx)(g.a.Text,{children:k}),Object(x.jsx)("input",{type:"checkbox",checked:c,onChange:function(e){E(i,e.target.checked)}}),Object(x.jsx)(v.a,{variant:"link",onClick:function(e){C(i)},children:"Delete Todo Item"}),c&&Object(x.jsxs)("i",{children:["Item Completed on: ",new Date(s).toLocaleDateString("en-us")]}),j&&Object(x.jsx)(d.a,{href:"/todo/".concat(i),children:"View Full-Length Todo Item"})]})})}var w=n.a.memo(C);function y(e){var t=e.id,a=Object(r.useContext)(h.a).state,n=Object(p.b)((function(){return{url:"/todo/".concat(t),headers:{Authorization:"".concat(a.user.access_token)},method:"get"}})),c=Object(o.a)(n,2),s=c[0],i=c[1];return Object(r.useEffect)(i,[t]),Object(x.jsxs)("div",{children:[s&&s.data?Object(x.jsx)(w,Object(m.a)({},s.data)):"Loading...",Object(x.jsx)("div",{children:Object(x.jsx)(d.a,{href:"/",children:"Return"})})]})}var T=a(108),E=a(106);function k(e){var t=e.show,a=e.handleClose,n=Object(r.useContext)(h.a).dispatch,c=Object(r.useState)({username:"",password:"",repeatedPassword:""}),s=Object(o.a)(c,2),i=s[0],d=s[1],u=Object(r.useState)(""),j=Object(o.a)(u,2),l=(j[0],j[1]),b=Object(p.b)((function(e,t){return{url:"auth/register",method:"post",data:{username:e,password:t,passwordConfirmation:t}}})),O=Object(o.a)(b,2),f=O[0],g=O[1];return Object(r.useEffect)((function(){f&&f.data&&n({type:"REGISTER",username:f.data.username})}),[f]),Object(r.useEffect)((function(){f&&!1===f.isLoading&&(f.data||f.error)&&(f.error?(console.log(f),l("Registration attempt failed.  Please try again."),alert("fail")):(console.log(f),l("Registration completed successfully. You may now login."),alert("success")))}),[f]),Object(x.jsx)(T.a,{show:t,onHide:a,children:Object(x.jsxs)(E.a,{onSubmit:function(e){e.preventDefault(),g(i.username,i.password),a()},children:[Object(x.jsx)(T.a.Header,{closeButton:!0,children:Object(x.jsx)(T.a.Title,{children:"Register"})}),Object(x.jsxs)(T.a.Body,{children:[Object(x.jsx)(E.a.Label,{htmlFor:"register-username",children:"User ID:"}),Object(x.jsx)(E.a.Control,{type:"text",value:i.username,onChange:function(e){return d(Object(m.a)(Object(m.a)({},i),{},{username:e.target.value}))},name:"register-username",id:"register-username"}),Object(x.jsx)(E.a.Label,{htmlFor:"register-password",children:"Password:"}),Object(x.jsx)(E.a.Control,{type:"password",name:"register-password",id:"register-password",value:i.password,onChange:function(e){return d(Object(m.a)(Object(m.a)({},i),{},{password:e.target.value}))}}),Object(x.jsx)(E.a.Label,{htmlFor:"register-password-repeat",children:"Enter Password Again to Confirm:"}),Object(x.jsx)(E.a.Control,{type:"password",name:"register-password-repeat",id:"register-password-repeat",value:i.repeatedPassword,onChange:function(e){return d(Object(m.a)(Object(m.a)({},i),{},{repeatedPassword:e.target.value}))}})]}),Object(x.jsxs)(T.a.Footer,{children:[Object(x.jsx)(v.a,{variant:"secondary",onClick:a,children:"Cancel"}),Object(x.jsx)(v.a,{variant:"primary",type:"submit",disabled:0===i.username.length||0===i.password.length||i.password!==i.repeatedPassword,children:"Submit Registration"})]})]})})}function D(e){var t=e.show,a=e.handleClose,n=Object(r.useContext)(h.a).dispatch,c=Object(r.useState)(""),s=Object(o.a)(c,2),i=s[0],d=s[1],u=Object(r.useState)(""),j=Object(o.a)(u,2),l=j[0],b=j[1],O=Object(r.useState)(!1),f=Object(o.a)(O,2),m=f[0],g=f[1];var C=Object(p.b)((function(e,t){return{url:"auth/login",method:"post",data:{username:e,password:t}}})),w=Object(o.a)(C,2),y=w[0],k=w[1];return Object(r.useEffect)((function(){y&&!1===y.isLoading&&(y.data||y.error)&&(y.error?(g(!0),alert("failed")):(g(!1),console.log(y.data),n({type:"LOGIN",username:i,access_token:y.data.access_token})))}),[y]),Object(x.jsx)(T.a,{show:t,onHide:a,children:Object(x.jsxs)(E.a,{onSubmit:function(e){e.preventDefault(),k(i,l),a()},children:[Object(x.jsx)(T.a.Header,{closeButton:!0,children:Object(x.jsx)(T.a.Title,{children:"Login"})}),Object(x.jsxs)(T.a.Body,{children:[Object(x.jsx)(E.a.Label,{htmlFor:"login-username",children:"User ID:"}),Object(x.jsx)(E.a.Control,{type:"text",value:i,onChange:function(e){d(e.target.value)},name:"login-username",id:"login-username"}),Object(x.jsx)(E.a.Label,{htmlFor:"login-password",children:"User Password:"}),Object(x.jsx)(E.a.Control,{type:"password",value:l,onChange:function(e){b(e.target.value)},name:"login-password",id:"login-password"}),m&&Object(x.jsx)(E.a.Text,{style:{color:"crimson"},children:"User ID or User Password is Invalid"})]}),Object(x.jsxs)(T.a.Footer,{children:[Object(x.jsx)(v.a,{variant:"secondary",onClick:a,children:"Cancel"}),Object(x.jsx)(v.a,{variant:"primary",disabled:0===i.length,type:"submit",children:"Login"})]})]})})}function S(){var e=n.a.lazy((function(){return a.e(3).then(a.bind(null,110))})),t=Object(r.useContext)(h.a).state,c=Object(r.useState)(!1),s=Object(o.a)(c,2),i=s[0],d=s[1],u=Object(r.useState)(!1),j=Object(o.a)(u,2),l=j[0],b=j[1];return t.user.username?Object(x.jsx)(e,{}):Object(x.jsxs)("div",{className:"justify-content-end",children:[Object(x.jsx)(v.a,{variant:"link",onClick:function(e){return d(!0)},children:"Login"}),Object(x.jsx)(D,{show:i,handleClose:function(){return d(!1)}}),Object(x.jsx)(v.a,{variant:"link",onClick:function(e){return b(!0)},children:"Register"}),Object(x.jsx)(k,{show:l,handleClose:function(){return b(!1)}})]})}var L=a(107),I=function(e){var t=e.text,a=Object(r.useContext)(h.b);return Object(x.jsx)(d.a,{href:"/",children:Object(x.jsx)(L.a.Brand,{style:{color:a.primaryColor},children:t})})},_=a(105);function R(e){e.setTheme,Object(r.useContext)(h.b);var t=Object(r.useContext)(h.a).state.user;return Object(x.jsx)(L.a,{bg:"light",expand:"lg",children:Object(x.jsxs)(u.a,{children:[Object(x.jsx)(L.a.Brand,{href:"/",children:Object(x.jsx)(I,{text:"Multi-User To-Do App"})}),Object(x.jsx)(L.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(x.jsxs)(L.a.Collapse,{id:"basic-navbar-nav",children:[Object(x.jsx)(_.a,{className:"me-auto",children:t.username&&Object(x.jsx)(_.a.Link,{children:Object(x.jsx)(d.a,{href:"/todo/create",children:"Create New Todo Item"})})}),Object(x.jsx)(n.a.Suspense,{fallback:"Loading...",children:Object(x.jsx)(S,{})})]})]})})}function F(){var e=Object(r.useContext)(h.a).state.todos;return Object(x.jsx)("div",{children:e.map((function(e,t){return Object(r.createElement)(w,Object(m.a)(Object(m.a)({},e),{},{short:!0,title:e.title,author:e.author,key:"todo-"+t,todoId:e.id}))}))})}function P(){var e=Object(r.useContext)(h.a),t=e.state,a=e.dispatch,n=Object(p.b)((function(){return{url:"/todo",method:"get",headers:{Authorization:"".concat(t.user.access_token)}}})),c=Object(o.a)(n,2),s=c[0],i=c[1];Object(r.useEffect)((function(){t.user.access_token&&i()}),[]),Object(r.useEffect)((function(){i()}),[t.user.access_token]),Object(r.useEffect)((function(){s&&!1===s.isLoading&&s.data&&(console.log(s.data),a({type:"FETCH_TODOS",todoss:s.data.todos}))}),[s]);s.data;var d=s.isLoading;return Object(x.jsxs)(x.Fragment,{children:[d&&"Todos loading..."," ",Object(x.jsx)(F,{})]})}function G(){var e=Object(r.useReducer)(O,{user:{},todos:[]}),t=Object(o.a)(e,2),a=t[0],n=t[1],c=(a.user,Object(r.useState)({primaryColor:"dodgerblue",secondaryColor:"darkorange"})),s=Object(o.a)(c,2),j=s[0],l=s[1],b=Object(i.f)({"/":Object(i.g)({view:Object(x.jsx)(P,{})}),"/todo/create":Object(i.g)({view:Object(x.jsx)(f,{})}),"/todo/:id":Object(i.g)((function(e){return{view:Object(x.jsx)(y,{id:e.params.id})}}))});return Object(x.jsx)("div",{children:Object(x.jsx)(h.b.Provider,{value:j,children:Object(x.jsx)(h.a.Provider,{value:{state:a,dispatch:n},children:Object(x.jsx)(d.b,{routes:b,children:Object(x.jsxs)(u.a,{children:[Object(x.jsx)(R,{setTheme:l}),Object(x.jsx)("hr",{}),Object(x.jsx)(d.c,{})]})})})})})}var A=a(37),B=a.n(A).a.create({baseURL:"/"});s.a.render(Object(x.jsx)(n.a.StrictMode,{children:Object(x.jsx)(p.a,{value:B,children:Object(x.jsx)(G,{})})}),document.getElementById("root"))},8:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return s}));var r=a(0),n=a.n(r),c=n.a.createContext({primaryColor:"dodgerblue",secondaryColor:"darkorange"}),s=n.a.createContext({state:{},dispatch:function(){}})}},[[100,1,2]]]);
//# sourceMappingURL=main.cb7db5b3.chunk.js.map